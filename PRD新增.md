# 区块链地址监听后台管理系统 - 终极PRD（含本期新增功能）

## 一、系统概述

本系统为区块链地址监听管理后台，支持客户地址监听、链上交易记录、回调、基础配置（公链、代币等）。

本期版本重点新增：
- 监听地址监控条件设置功能
- 满足条件时，自动提交交易至闪电转账/多签系统

---

## 二、后台页面结构（可视化页面关系图）

```
【客户管理】
└── 客户列表
       └── 查看地址 ➔ 地址管理（按客户归属）

【监听管理】
├── 地址管理
│      └── 进入地址详情 ➔ 监控条件配置
├── 地址添加记录
├── 监听记录（链上交易记录）
│      └── 满足监控条件 ➔ 生成异常触发记录
├── 异常触发记录（本期新增）
│      └── 触发提交 ➔ 动作提交记录（自动/手动提交闪电转账/多签）
└── 回调记录（链上交易同步客户）

【公链管理】
├── 公链管理
└── 代币管理

【系统管理】
├── 用户管理
└── 角色管理
```

【说明】
- 公链管理、代币管理为基础数据，供监听时识别公链/代币。
- 客户管理是按客户维度管理地址的入口。
- 监听管理是监听、记录、异常、回调、动作触发的全流程核心。

---

## 三、本期新增功能说明

### 1️⃣ 监控条件设置（新增）

**功能目的**
- 用于对某些地址设置“特殊监听规则”，满足规则就触发动作（报警、转账、多签等）。

**入口**
- 地址管理 ➔ 地址详情 ➔ 监控条件（Tab）

**配置内容**
- 条件类型：
  - 单笔交易金额（例如：单笔转入/转出金额 >= 100ETH）
  - 余额阈值（例如：地址余额 >= 500ETH）
  - 代币余额（例如：USDT余额 >= 10000USDT）

- 触发动作：
  - 仅报警
  - 提交闪电转账
  - 提交多签

- 状态（启用/禁用）
- 创建时间、更新时间

**作用**
- 配置后，系统在监听链上交易时自动判断是否满足条件。


### 2️⃣ 动作提交（闪电转账 / 多签）（新增）

**功能目的**
- 监控条件命中后，自动发起动作（闪电转账或多签），实现自动化业务联动。

**入口**
- 异常触发记录页面（记录每一次触发动作的情况）

**内容字段**
- 触发交易Hash
- 监听地址
- 公链
- 代币
- 触发条件（命中的监控规则）
- 动作类型（闪电转账 / 多签）
- 动作状态（已提交 / 失败 / 重试中）
- 操作（支持手动补发）

**作用**
- 当触发动作后，系统会对接闪电转账/多签系统
- 提交成功/失败状态都会记录
- 失败的可供运营手动重发

---

## 四、总结

### 之前系统功能
- 客户地址 ➔ 链上监听 ➔ 交易记录 ➔ 回调客户（已完成的闭环）

### 本期升级功能
- 在【监听记录】与【回调】之间增加【监控条件 ➔ 动作触发 ➔ 动作记录】，完成【链上 → 运营动作 → 资金处理】闭环。

### 目的
- 让后台支持自动识别大额或特殊交易，并自动联动到下一步动作（资金自动转账 / 多签提案）。

（完）

